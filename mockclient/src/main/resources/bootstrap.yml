server:
  port: 8500

spring:
  application:
    name: news-mockclient
  profiles:
    active: dev
  cloud:
    config:
      uri: http://140.143.158.164:8000/
      label: master
      profile: dev
      name: ${spring.application.name},common,database,redis

feign:
  client:
    config:
      #      default: #全局超时配置 connectTimeout和readTimeout都要配置，否则会以ribbon的配置为主（都是1000）
      #        connectTimeout: 2000
      #        readTimeout: 2200
      hishop-gateway: #具体服务超时配置，FeignClient的value，区分大小写
        connectTimeout: 20000
        readTimeout: 20000
      hishop-aggregation: #具体服务超时配置，FeignClient的value，区分大小写
        connectTimeout: 10000
        readTimeout: 10000
      hishop-user: #具体服务超时配置，FeignClient的value，区分大小写
        connectTimeout: 10000
        readTimeout: 10000
      hishop-goods: #具体服务超时配置，FeignClient的value，区分大小写
        connectTimeout: 10000
        readTimeout: 10000
      hishop-order: #具体服务超时配置，FeignClient的value，区分大小写
        connectTimeout: 10000
        readTimeout: 10000
  #开启hystrix
  hystrix:
    enabled: true


hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          semaphore:
            maxConcurrentRequests: 1000 #(zuul的参数名是maxSemaphores) could not acquire a semaphore for execution
            #thread:
            #timeoutInMilliseconds: 20000 #hystrix超时时间，默认1秒
        timeout:
          enabled: false #hystrix从不超时
      circuitBreaker:
        sleepWindowInMilliseconds:  5000 #短路多久以后开始尝试是否恢复，默认5s

      fallback:
        isolation:
          strategy: semaphore #配置断路器中的隔离策略为信号量
          semaphore:
            maxConcurrentRequests: 100  #配置断路器中的信号量大小，默认10，太小了再并发较高的情况下会报 HystrixRuntimeException:fallback execution rejected
  threadpool:
    default:
      coreSize: 100 #并发执行的最大线程数，默认10，并发大于10时，请求线程会报错：java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@460d14a1 rejected from java.util.concurrent.ThreadPoolExecutor@3876c0f2[Running, pool size = 4, active threads = 4, queued tasks = 0, completed tasks = 0]
      maxQueuedSize: 1000 #BlockingQueue的最大队列数，默认-1
      queueSizeRejectionThreshold: 1000 #即使maxQueueSize没有达到，达到queueSizeRejectionThreshold该值后，请求也会被拒绝，默认值5


# 监控配置
management:
  endpoint:
    health:
      show-details: always
  endpoints:
    web:
      exposure:
        include: "*"
        #exclude: beans #不暴露beans端点

config:
  hishop:
    common:
      host: localhost:8080/
    gateway:
      host: 10.249.254.246:8200/
    aggregation:
      host: 10.249.254.246:8311/


